<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Wiener partners</title>
    <link rel="stylesheet" type="text/css" href="../../Content/table.css">
    <link rel="stylesheet" type="text/css" href="../../Content/home.css">
    <link rel="stylesheet" type="text/css" href="../../Content/modal.css">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
    <script src="../../Scripts/homeUtils.js"></script>
    <script src="../../Scripts/ajaxRequests.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

</head>
<body>
    <div class="btn-container">
        <button id="btnAddPartner" class="addBtn">Add new partner</button>
    </div>
    <div id="partnerDetailModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <p id="detailFullName" style="font-weight:bold;"></p>
            <p id="detailAddress" style="font-weight:bold;"></p>
            <p id="detailPartnerNumber" style="font-weight:bold;"></p>
            <p id="detailCroatianPIN" style="font-weight:bold;"></p>
            <p id="detailPartnerTypeId" style="font-weight:bold;"></p>
            <p id="detailCreatedAtUtc" style="font-weight:bold;"></p>
            <p id="detailCreateByUser" style="font-weight:bold;"></p>
            <p id="detailIsForeign" style="font-weight:bold;"></p>
            <p id="detailExternalCode" style="font-weight:bold;"></p>
            <p id="detailGender" style="font-weight:bold;"></p>
        </div>
    </div>

    <div id="policyAddModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3 id="addPolicyModalHeader"></h3>
            <br />
            <form>
                <label for="partnerNumber">Policy amount in €: </label>
                <input type="number" id="policyAmount" name="policyAmount" pattern="\d{1,8}" required> <br />
                <button id="btnNewPolicy" class="btnAdd">Create new policy</button>
            </form>
        </div>
    </div>
    <script>
        $(document).ready(function () {
            var partners = {{PartnersData}};
            CreatePartnersTable(partners);

        var modal = document.getElementById("partnerDetailModal");
        var modalPolicy = document.getElementById("policyAddModal");

        window.onclick = function (event) {
            if (event.target == modal) modal.style.display = 'none';
            if (event.target == modalPolicy) modal.style.display = 'none';
        }

        var closeButton = document.querySelector('.close');

        closeButton.onclick = function () {
            modal.style.display = 'none';
            modalPolicy.style.display = 'none';
        }
        $('#policyAddModal .close').click(function () {
            $('#policyAddModal').css('display', 'none');
        });
        document.getElementById("btnAddPartner").addEventListener("click", DisplayNewPartnerPage);
        document.getElementById("btnNewPolicy").addEventListener("click", AddPolicy);
        });
        
    </script>
</body>
</html>